<!DOCTYPE html>
<html dir="ltr" lang="pt-BR">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>:: Gerenciamento de Estoque ::</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <link href="dist/css/style.min.css" rel="stylesheet">

</head>

<body style="background-color: #eee;">

    <div class="preloader">
        <div class="lds-ripple">
            <div class="lds-pos"></div>
            <div class="lds-pos"></div>
        </div>
    </div>

    <div id="main-wrapper">

        <header class="topbar" data-navbarbg="skin5">
            <nav class="navbar top-navbar navbar-expand-md navbar-dark">
                <div class="navbar-header" data-logobg="skin5">

                    <a class="nav-toggler waves-effect waves-light d-block d-md-none" href="javascript:void(0)"><i
                            class="ti-menu ti-close"></i></a>
                    <a class="navbar-brand" href="index.html">
                        <b class="logo-icon p-l-10">
                            <img src="Icons/png/caixa.png" alt="Ícone PNG" style="width: 30%;"> ESTOQUE
                        </b>
                    </a>

                    <a class="topbartoggler d-block d-md-none waves-effect waves-light" href="javascript:void(0)"
                        data-toggle="collapse" data-target="#navbarSupportedContent"
                        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><i
                            class="ti-more"></i></a>

                </div>

                <div class="navbar-collapse collapse" id="navbarSupportedContent" data-navbarbg="skin5">

                    <ul class="navbar-nav float-left mr-auto">

                    </ul>

                    <ul class="navbar-nav float-right">

                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle text-muted waves-effect waves-dark pro-pic" href=""
                                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><img
                                    src="assets/images/users/1.jpg" alt="user" class="rounded-circle" width="31"></a>
                            <div class="dropdown-menu dropdown-menu-right user-dd animated">
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="javascript:void(0)"><i
                                        class="ti-settings m-r-5 m-l-5"></i> Account Setting</a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="javascript:void(0)"><i
                                        class="fa fa-power-off m-r-5 m-l-5"></i> Logout</a>

                            </div>
                        </li>

                    </ul>
                </div>
            </nav>
        </header>

        <aside class="left-sidebar" data-sidebarbg="skin5">

            <div class="scroll-sidebar">
                <nav class="sidebar-nav">

                    <ul id="sidebarnav" class="p-t-30">

                        <li class="sidebar-item"> 
                            <a class="sidebar-link waves-effect waves-dark sidebar-link" href="dashboard.html" aria-expanded="false">
                                <i class="mdi mdi-view-dashboard"></i>
                                <span class="hide-menu">Dashboard</span>
                            </a>
                        </li>

                        <li class="sidebar-item">
                            <a class="sidebar-link waves-effect waves-dark sidebar-link" href="clientes.html"
                                aria-expanded="false">
                                <i class="mdi mdi-account"></i>
                                <span class="hide-menu">Clientes</span>
                            </a>
                        </li>

                        <li class="sidebar-item">
                            <a class="sidebar-link waves-effect waves-dark sidebar-link" href="produtos.html"
                                aria-expanded="false">
                                <i class="mdi mdi-package"></i>
                                <span class="hide-menu">Produtos</span>
                            </a>
                        </li>
                        
                    </ul>
                </nav>
            </div>
        </aside>

        <div class="page-wrapper">
            <div class="container-fluid">
                <h2 class="p-10">Clientes</h2>
                <div class="text-right">
                    <button class="btn btn-primary cadastrar-button m-3" data-toggle="modal"
                        data-target="#cadastroModal">Cadastrar Cliente</button>
                </div>

                <div id="lista-clientes">
                </div>

                <div class="modal fade" id="cadastroModal">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h4 class="modal-title">Cadastro de Cliente</h4>
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                            </div>
                            <div class="modal-body">
                                <form>
                                    <div class="form-group">
                                        <label for="nome">Nome:</label>
                                        <input type="text" class="form-control" id="nome" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="tipo">Tipo:</label>
                                        <select class="form-control tipo" id="tipo">
                                            <option value="PF">Pessoa Física</option>
                                            <option value="PJ">Pessoa Jurídica</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="documento">Documento:</label>
                                        <input type="text" class="form-control" id="documento" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="endereco">Endereço:</label>
                                        <input type="text" class="form-control" id="endereco" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="telefone">Telefone:</label>
                                        <input type="text" class="form-control" id="telefone" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="dataNascimento">Data de Nascimento:</label>
                                        <input type="date" class="form-control" id="dataNascimento" required>
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-success"
                                    onclick="cadastrarCliente()">Salvar</button>
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="modal fade" id="visualizarModal">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h4 class="modal-title">Visualizar Cliente</h4>
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                            </div>

                            <div class="modal-body" id="infoCliente">
                            </div>

                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="modal fade" id="editarModal">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h4 class="modal-title">Editar Cliente</h4>
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                            </div>
                            <div class="modal-body">
                                <form>
                                    <div class="form-group">
                                        <label for="editNome">Nome:</label>
                                        <input type="text" class="form-control" id="editNome" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="editTipo tipo">Tipo:</label>
                                        <select class="form-control" id="editTipo">
                                            <option value="PF">Pessoa Física</option>
                                            <option value="PJ">Pessoa Jurídica</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="editDocumento">Documento:</label>
                                        <input type="text" class="form-control" id="editDocumento" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="editEndereco">Endereço:</label>
                                        <input type="text" class="form-control" id="editEndereco" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="editTelefone">Telefone:</label>
                                        <input type="text" class="form-control" id="editTelefone" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="editDataNascimento">Data de Nascimento:</label>
                                        <input type="date" class="form-control" id="editDataNascimento" required>
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-success" onclick="salvarEdicao()">Salvar</button>
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card" style="background-color: #eee;">
                    
                        <div class="table-responsive">
                            <table id="zero_config" class="table table-striped table-bordered table-dark" >
                                <thead>
                                    <tr>
                                        <th>Nome</th>
                                        <th>Tipo</th>
                                        <th>Documento</th>
                                        <th>Endereço</th>
                                        <th>Telefone</th>
                                        <th>Data de Nascimento</th>
                                        <th>Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="tabela-clientes">
                                </tbody>
                            </table>
                        </div>
                </div>
            </div>


            <footer class="footer text-center pb-lg-5">
                Todos os direitos reservados para a turma DS 2023.2 ETEAVS ❤.
            </footer>
        </div>
    </div>

    <script src="assets/libs/jquery/dist/jquery.min.js"></script>
    <script src="dist/js/jquery.ui.touch-punch-improved.js"></script>
    <script src="dist/js/jquery-ui.min.js"></script>
    <script src="assets/libs/popper.js/dist/umd/popper.min.js"></script>
    <script src="assets/libs/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="assets/libs/perfect-scrollbar/dist/perfect-scrollbar.jquery.min.js"></script>
    <script src="assets/extra-libs/sparkline/sparkline.js"></script>
    <script src="dist/js/waves.js"></script>
    <script src="dist/js/sidebarmenu.js"></script>
    <script src="dist/js/custom.min.js"></script>
    <script src="assets/libs/moment/min/moment.min.js"></script>
    <!-- js de tabela 
    <script src="assets/extra-libs/DataTables/datatables.min.js"></script>
    <script>
        $('#zero_config').DataTable();
    </script>
-->
    <script>
        let listaDeClientes = [];

        function abrirModalVisualizar(clienteId) {
            const cliente = listaDeClientes.find(c => c.id === clienteId);
            document.getElementById("infoCliente").innerHTML = `
                <strong>Nome:</strong> ${cliente.nome}<br>
                <strong>Tipo:</strong> ${cliente.tipo}<br>
                <strong>Documento:</strong> ${cliente.documento}<br>
                <strong>Endereço:</strong> ${cliente.endereco}<br>
            `;
            $('#visualizarModal').modal('show');
        }

        function abrirModalEditar(clienteId) {
            const cliente = listaDeClientes.find(c => c.id === clienteId);
            document.getElementById("editNome").value = cliente.nome;
            document.getElementById("editTipo").value = cliente.tipo;
            document.getElementById("editDocumento").value = cliente.documento;
            document.getElementById("editEndereco").value = cliente.endereco;
            document.getElementById("editTelefone").value = cliente.telefone;
            document.getElementById("editDataNascimento").value = cliente.dataNascimento;
            $('#editarModal').modal('show');
        }

        function salvarEdicao() {
            $('#editarModal').modal('hide');
        }

        function deletarCliente(clienteId) {
            listaDeClientes = listaDeClientes.filter(c => c.id !== clienteId);
            atualizarTabelaClientes();
        }

        function cadastrarCliente() {
            const nome = document.getElementById("nome").value;
            const tipo = document.getElementById("tipo").value;
            const documento = document.getElementById("documento").value;
            const endereco = document.getElementById("endereco").value;
            const telefone = document.getElementById("telefone").value;
            const dataNascimento = document.getElementById("dataNascimento").value;

            const novoCliente = {
                id: new Date().getTime(),
                nome,
                tipo,
                documento,
                endereco,
                telefone,
                dataNascimento
            };

            listaDeClientes.push(novoCliente);
            $('#cadastroModal').modal('hide');

            document.getElementById("nome").value = "";
            document.getElementById("tipo").value = "";
            document.getElementById("documento").value = "";
            document.getElementById("endereco").value = "";
            document.getElementById("telefone").value = "";
            document.getElementById("dataNascimento").value = "";

            atualizarTabelaClientes();
        }
        
        function atualizarTabelaClientes() {
            const tabelaClientes = document.getElementById("tabela-clientes");
            tabelaClientes.innerHTML = "";

            if (listaDeClientes.length === 0) {
                const row = tabelaClientes.insertRow();
                const cell = row.insertCell(0);
                cell.colSpan = 8;
                cell.innerHTML = "Nenhum cliente";
            } else {
                const headerRow = tabelaClientes.insertRow();
                headerRow.innerHTML = `
                    <th>Nome</th>
                    <th>Tipo</th>
                    <th>Documento</th>
                    <th>Endereço</th>
                    <th>Telefone</th>
                    <th>Data de Nascimento</th>
                    <th>Ações</th>
                `;
        
                listaDeClientes.forEach(cliente => {
                    const row = tabelaClientes.insertRow();
                    row.innerHTML = `
                <td>${cliente.nome}</td>
                <td>${cliente.tipo}</td>
                <td>${cliente.documento}</td>
                <td>${cliente.endereco}</td>
                <td>${cliente.telefone}</td>
                <td>${cliente.dataNascimento}</td>
                <td class="text-center">
                    <button class="btn btn-info mx-2" onclick="abrirModalVisualizar(${cliente.id})"><i class="fas fa-eye"></i></button>
                    <button class="btn btn-warning mx-2" onclick="abrirModalEditar(${cliente.id})"><i class="fas fa-edit"></i></button>
                    <button class="btn btn-danger mx-2" onclick="deletarCliente(${cliente.id})"><i class="far fa-times-circle"></i></button>
                </td>

            `;
                });
            }
        }

        window.onload = function () {
            atualizarTabelaClientes();
        }
    </script>

</body>

</html>